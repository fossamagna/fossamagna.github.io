"use strict";(self.webpackChunkfossamagna_github_io=self.webpackChunkfossamagna_github_io||[]).push([[524],{8829:function(e,n,a){a.r(n),a.d(n,{Head:function(){return b},default:function(){return g}});var t=a(3366),l=a(6410),i=a(7294);function s(e){var n=Object.assign({p:"p",a:"a",h2:"h2",ul:"ul",li:"li",strong:"strong",div:"div",code:"code",img:"img"},(0,l.ah)(),e.components);return i.createElement(i.Fragment,null,i.createElement(n.p,null,"この記事は ",i.createElement(n.a,{href:"https://qiita.com/advent-calendar/2024/amplify"},"AWS Amplify と AWS× フロントエンド #AWSAmplifyJP Advent Calendar 2024"),"、",i.createElement(n.a,{href:"https://adventar.org/calendars/10806"},"ESM Advent Calendar 2024")," の 2 日目の記事です。"),"\n",i.createElement(n.h2,{id:"amplify-gen2-ga"},"Amplify Gen2 GA"),"\n",i.createElement(n.p,null,"今年は 2024/5/6 に AWS Amplify Gen2 が GA になりました。Gen1 とは別に Gen2 は AWS CDK をベースに新たに作成されました。\nAmplify Gen2 は次のような特徴を持っています。"),"\n",i.createElement(n.ul,null,"\n",i.createElement(n.li,null,"AWS CDK をベースとする次世代の Amplify のバックエンド構築ツール"),"\n",i.createElement(n.li,null,"TypeScript によるバックエンド定義を提供"),"\n",i.createElement(n.li,null,i.createElement(n.strong,null,"開発者毎の独立した sandbox 環境を提供")),"\n",i.createElement(n.li,null,"Git のブランチと AWS 環境を 1:1 でマッピング"),"\n"),"\n",i.createElement(n.h2,{id:"amplify-gen2-sandbox"},"Amplify Gen2 Sandbox"),"\n",i.createElement(n.p,null,"Amplify Gen2 の特徴の中でも特に便利だと思うのが、",i.createElement(n.a,{href:"https://docs.amplify.aws/react/deploy-and-host/sandbox-environments/setup/"},"Amplify Gen2 sandbox 環境"),"の機能です。 Amplify Gen2 sandbox 環境は開発者ごとの独立したクラウドサンドボックス環境で、チームの各開発者は、sandobox 環境の機能により自分の変更をテストできる隔離されたクラウド開発環境を利用するができます。"),"\n",i.createElement(n.p,null,i.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/e20facd880cdc05bc1190dcb7a48739b/882b9/sandbox-opt-1920.webp"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 63.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/webp;base64,UklGRkwAAABXRUJQVlA4IEAAAADQAgCdASoUAA0APtFUo0uoJKMhsAgBABoJaQAAfqoAAP7xvzFWa5sqEEvX/a2ebc/RzidKkz7yxgHa+Vw8gAAA\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="amplify gen2 sandbox"\n        title="amplify gen2 sandbox"\n        src="/static/e20facd880cdc05bc1190dcb7a48739b/af3f0/sandbox-opt-1920.webp"\n        srcset="/static/e20facd880cdc05bc1190dcb7a48739b/4c812/sandbox-opt-1920.webp 320w,\n/static/e20facd880cdc05bc1190dcb7a48739b/0ba47/sandbox-opt-1920.webp 640w,\n/static/e20facd880cdc05bc1190dcb7a48739b/af3f0/sandbox-opt-1920.webp 1280w,\n/static/e20facd880cdc05bc1190dcb7a48739b/882b9/sandbox-opt-1920.webp 1920w"\n        sizes="(max-width: 1280px) 100vw, 1280px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",i.createElement(n.strong,null,"画像は ",i.createElement(n.a,{href:"https://docs.amplify.aws/react/deploy-and-host/sandbox-environments/setup/"},"Amplify Docs")," より引用")),"\n",i.createElement(n.p,null,"sandbox 環境の構築は非常に簡単で ",i.createElement(n.code,null,"npx ampx sandbox")," コマンドを実行するだけです。\nさらに、CDK ベースとなったことで hot swap デプロイにより、より迅速なイテレーション開発が可能です。Lambda のソースコードの修正などはこの hot swap デプロイが利用できるので、エディタでコードを修正して保存すると数秒でデプロイが完了してすぐに動作を確認することができます。"),"\n",i.createElement(n.h2,{id:"amplify-gen2-sandbox-で困ったこと"},"Amplify Gen2 Sandbox で困ったこと"),"\n",i.createElement(n.p,null,"Amplify Gen2 sandbox 環境はこのようにとても便利ですが、困った点もありました。"),"\n",i.createElement(n.p,null,"Amplify によって sandbox 環境には多くの AWS リソースが作成されます。\nAmplify によって作成された AWS リソース（例えば、AppSync や Lambda、DynamoDB など）を AWS コンソールで確認したいことがあると思います。例えば、GraphQL リクエストを送信したり、DynamoDB テーブルの内容を確認したり、Lambda の実行ログを CloudWatch Logs で確認したりです。"),"\n",i.createElement(n.p,null,"Amplify コンソールでは Git ブランチに紐づいた共有環境の場合は AWS リソースのリストが表示されて確認できますが、残念ながら、sandbox 環境は以下のように 1 行で表示されるだけで、sandbox 内の AWS リソースは確認できません。"),"\n",i.createElement(n.p,null,i.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/a6059307c4224ad85337a6906d3eb1ce/882b9/sandbox5-opt-1920.webp"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/webp;base64,UklGRkAAAABXRUJQVlA4IDQAAAAQAwCdASoUAAYAPtFWo0uoJKMhsAgBABoJaQAAetDOEAAA/vIKN+0JAgu3U8chpdEjgAAA\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="sandbox list"\n        title="sandbox list"\n        src="/static/a6059307c4224ad85337a6906d3eb1ce/af3f0/sandbox5-opt-1920.webp"\n        srcset="/static/a6059307c4224ad85337a6906d3eb1ce/4c812/sandbox5-opt-1920.webp 320w,\n/static/a6059307c4224ad85337a6906d3eb1ce/0ba47/sandbox5-opt-1920.webp 640w,\n/static/a6059307c4224ad85337a6906d3eb1ce/af3f0/sandbox5-opt-1920.webp 1280w,\n/static/a6059307c4224ad85337a6906d3eb1ce/882b9/sandbox5-opt-1920.webp 1920w"\n        sizes="(max-width: 1280px) 100vw, 1280px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",i.createElement(n.strong,null,"画像は ",i.createElement(n.a,{href:"https://docs.amplify.aws/react/deploy-and-host/sandbox-environments/setup/#manage-sandbox-environments"},"Amplify Docs")," より引用")),"\n",i.createElement(n.p,null,"また、Amplify コンソールからではなく確認したいリソースの AWS コンソールから sandbox のリソースを探そうとしても、数か多かったり、名前が同じだったり、どの sandbox のリソースなのか判別しにくい名前になっていたりして目的のリソースにたどり着くのが大変です。\n例えば、AppSync の場合、デフォルトでは API も名前が全て同じになってしまっていて、エンドポイント URL を手掛かりにして探すしかない状況です。"),"\n",i.createElement(n.p,null,i.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/d4df62c7a440abdd07a3baf37cce7827/29007/amplify-sandbox-appsync-api-list.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 46.875%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVQoz4WQW46cQAxF2f8isqNI+coGMlBQRfltl4FW9whmATm6X5aO7pWnZV3X1j1Czf4TdzUTM1WS8lewTEiERJmZx5HHw3neebgezp88xzyuNOA/v+Tf7ykiiFUsmNjMWtuJyD3cnYjMLCJUtANk5nVdiLjVRjo8csocPK5uh6p4RAeotW7bBoD73td1YxYzc/fP5/N+v4mobrW1am63rPkiPyN8ZDIzAgKACDNz7/0uHyMifmRVA0BEiogpM8HPyilMHtH2fV23Usree61tnmcRMfPeQdXGSEQiZncfY0xHDvSzSqqwe9TWSilLKb33rdaveRERVTWzzwMALEsp66qqtwyPfDe711rnZfma533ft61+zTPx/UgiPs/z9XoBYNt3RLxnqxmpoxjL3YHEQAR0b0MiQGRVMQPEDkAiJKLuMYaafwNDHP4UVhEJgQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="AppSync API List"\n        title="AppSync API List"\n        src="/static/d4df62c7a440abdd07a3baf37cce7827/21b4d/amplify-sandbox-appsync-api-list.png"\n        srcset="/static/d4df62c7a440abdd07a3baf37cce7827/72799/amplify-sandbox-appsync-api-list.png 320w,\n/static/d4df62c7a440abdd07a3baf37cce7827/6af66/amplify-sandbox-appsync-api-list.png 640w,\n/static/d4df62c7a440abdd07a3baf37cce7827/21b4d/amplify-sandbox-appsync-api-list.png 1280w,\n/static/d4df62c7a440abdd07a3baf37cce7827/29007/amplify-sandbox-appsync-api-list.png 1600w"\n        sizes="(max-width: 1280px) 100vw, 1280px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}})),"\n",i.createElement(n.h2,{id:"amplify-gen2-sandbox-で困ったことの解決方法"},"Amplify Gen2 Sandbox で困ったことの解決方法"),"\n",i.createElement(n.p,null,"そこで、各開発者が自身の sandbox の AWS リソースだけを確認できる",i.createElement(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=fossamagna.amplify-backend-vscode&ssr=false#overview"},"AWS Amplify Backend"),"という VSCode 拡張を作成・公開しました。"),"\n",i.createElement(n.p,null,"この VSCode 拡張の",i.createElement(n.code,null,"Amplify Backend Expoloer"),"を利用すると、以下のように自身の sandbox 環境の AWS リソースのみをツリー表示できます。ツリーのノードは sandbox 環境内の AWS リソースに対応していて、それを選択して対象のリソースの AWS コンソールを開くこともできます。"),"\n",i.createElement(n.p,null,i.createElement(n.img,{src:"/65c4078f2e15fa77371c958d9a23a63d/explorer.gif",alt:"Amplify Backend Explorer"})),"\n",i.createElement(n.p,null,"この VSCode 拡張を使うと自身の sandbox の AWS リソースのみを参照できるので、AWS コンソールで sandbox 環境のリソースを探すのに苦労することがなくなりました。"),"\n",i.createElement(n.p,null,"また、sandbox 環境の AWS リソースを表示するのに加えてこの VSCode 拡張では以下の機能をサポートしています。"),"\n",i.createElement(n.ul,null,"\n",i.createElement(n.li,null,"AWS プロファイルの切り替え"),"\n",i.createElement(n.li,null,"ツリーに表示するリソースをフィルターする機能"),"\n",i.createElement(n.li,null,"sandbox 環境のシークレットを追加/編集/削除"),"\n",i.createElement(n.li,null,"モノレポサポート"),"\n"),"\n",i.createElement(n.h2,{id:"まとめ"},"まとめ"),"\n",i.createElement(n.p,null,"AWS Amplify は Gen2 になり CDK ベースとなったことで Gen1 の頃よりもさらに便利な機能が提供され利用できるようになりました。そして、Amplify Gen2 sandbox をより便利に利用するために VSCode 拡張を作成・公開しました。"),"\n",i.createElement(n.p,null,"ぜひ、Amplify Gen2 を利用してみてもらいたいと思います。そして VSCode 拡張も合わせて使ってもらえるとうれしいです。この VSCode 拡張は",i.createElement(n.a,{href:"https://github.com/fossamagna/amplify-backend-vscode"},"GitHub リポジトリも公開"),"しているので、機能追加要望やバグ報告の Issue、Pull Request も大歓迎です。"))}var c=function(e){void 0===e&&(e={});var n=Object.assign({},(0,l.ah)(),e.components).wrapper;return n?i.createElement(n,e,i.createElement(s,e)):s(e)},o=a(1597),r=a(8771),d=a(5297),p=a(746),m=["data"],b=function(e){var n=e.data,a=(0,t.Z)(e,m),l=n.mdx;return i.createElement(p.F,Object.assign({data:n,title:l.frontmatter.title,description:l.frontmatter.description||l.excerpt},a))},A=function(e){var n,a=e.data,t=e.location,l=e.children,s=a.mdx,c=(null===(n=a.site.siteMetadata)||void 0===n?void 0:n.title)||"Title",p=a.previous,m=a.next;return i.createElement(d.Z,{location:t,title:c},i.createElement("article",{className:"blog-post",itemScope:!0,itemType:"http://schema.org/Article"},i.createElement("header",null,i.createElement("h1",{itemProp:"headline"},s.frontmatter.title),i.createElement("p",null,s.frontmatter.date)),l,i.createElement("hr"),i.createElement("footer",null,i.createElement(r.Z))),i.createElement("nav",{className:"blog-post-nav"},i.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},i.createElement("li",null,p&&i.createElement(o.Link,{to:p.fields.slug,rel:"prev"}," ← ",p.frontmatter.title)),i.createElement("li",null,m&&i.createElement(o.Link,{to:m.fields.slug,rel:"next"},m.frontmatter.title," →")))))};function g(e){return i.createElement(A,e,i.createElement(c,e))}},3366:function(e,n,a){function t(e,n){if(null==e)return{};var a,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}a.d(n,{Z:function(){return t}})}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-home-runner-work-fossamagna-github-io-fossamagna-github-io-content-blog-introduce-amplify-backend-vscode-index-md-4d962f2fcf7f67c3a560.js.map